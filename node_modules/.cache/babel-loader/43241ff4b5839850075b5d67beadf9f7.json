{"ast":null,"code":"const ADD_TASK = 'ADD_TASK';\nconst UPDATE_INPUT = 'UPDATE_INPUT';\nconst UPDATE_TASK_NAME = 'UPDATE_TASK_NAME';\nconst DELETE_TASK = 'DELETE_TASK';\nlet state = {\n  store: {\n    task: [// {id: 1, text: \"Первая задача\", done: false},\n      // {id: 2, text: \"Вторая задача\", done: false},\n      // {id: 3, text: \"Третья задача\", done: false},\n    ],\n    newTask: ''\n  },\n\n  rerenderTree() {\n    console.log(1);\n  },\n\n  subscribe(f) {\n    this.rerenderTree = f;\n  },\n\n  dispatch(action) {\n    if (action.type === ADD_TASK) {\n      let newTask = {\n        id: maxId(this.store),\n        text: this.store.newTask\n      };\n      this.store.task.push(newTask);\n      this.rerenderTree();\n    }\n\n    if (action.type === UPDATE_INPUT) {\n      this.store.newTask = action.newTask;\n      this.rerenderTree();\n    }\n\n    if (action.type === UPDATE_TASK_NAME) {\n      for (let txt in this.store.task) {\n        if (this.store.task[txt].text === action.nameDoneTask) {\n          this.store.task[txt].done = action.flag;\n          return;\n        }\n      }\n\n      this.rerenderTree();\n    }\n\n    if (action.type === DELETE_TASK) {\n      for (let d in this.store.task) {\n        if (this.store.task[d].id === action.idTask) {\n          this.store.task.splice(d, 1);\n          this.rerenderTree();\n          return;\n        }\n      }\n    }\n  }\n\n};\nexport let addTask = () => {\n  return {\n    type: ADD_TASK\n  };\n};\nexport let updateTask = text => {\n  return {\n    type: UPDATE_INPUT,\n    newTask: text\n  };\n};\nexport let addClassNameTask = (text, isFlag) => {\n  return {\n    type: UPDATE_TASK_NAME,\n    nameDoneTask: text,\n    flag: isFlag\n  };\n};\nexport let deleteTask = id => {\n  return {\n    type: DELETE_TASK,\n    idTask: id\n  };\n};\nexport let maxId = store => {\n  var _store$task$;\n\n  let max = 0;\n\n  if ((_store$task$ = store.task[0]) !== null && _store$task$ !== void 0 && _store$task$.id) {\n    max = store.task[0].id;\n  } else {\n    return -1;\n  }\n\n  for (let i in store.task) {\n    if (store.task[i].id > max) {\n      max = store.task[i].id;\n    }\n  }\n\n  return max + 1;\n};\nexport default state;","map":{"version":3,"names":["ADD_TASK","UPDATE_INPUT","UPDATE_TASK_NAME","DELETE_TASK","state","store","task","newTask","rerenderTree","console","log","subscribe","f","dispatch","action","type","id","maxId","text","push","txt","nameDoneTask","done","flag","d","idTask","splice","addTask","updateTask","addClassNameTask","isFlag","deleteTask","max","i"],"sources":["/Users/19691163/Desktop/todolist/todo/src/state/store.jsx"],"sourcesContent":["const ADD_TASK = 'ADD_TASK'\nconst UPDATE_INPUT = 'UPDATE_INPUT'\nconst UPDATE_TASK_NAME = 'UPDATE_TASK_NAME'\nconst DELETE_TASK = 'DELETE_TASK'\n\nlet state = {\n    store:{\n        task: [\n            // {id: 1, text: \"Первая задача\", done: false},\n            // {id: 2, text: \"Вторая задача\", done: false},\n            // {id: 3, text: \"Третья задача\", done: false},\n        ],\n        newTask: ''   \n    },\n\n    rerenderTree(){\n        console.log(1);\n    },\n\n    subscribe(f){\n        this.rerenderTree = f\n    },\n\n    dispatch(action){\n        \n        if(action.type === ADD_TASK){\n            let newTask = {\n                id: maxId(this.store),\n                text: this.store.newTask\n            }\n            this.store.task.push(newTask)\n            this.rerenderTree()\n        }\n        if(action.type === UPDATE_INPUT){\n            this.store.newTask = action.newTask\n            this.rerenderTree()\n        }\n        if(action.type === UPDATE_TASK_NAME){\n            for(let txt in this.store.task){\n                if(this.store.task[txt].text === action.nameDoneTask){\n                    this.store.task[txt].done = action.flag;\n                    return\n                }\n            }\n            this.rerenderTree();\n        } \n        if(action.type === DELETE_TASK){\n            for(let d in this.store.task){\n                if(this.store.task[d].id === action.idTask){\n                    this.store.task.splice(d, 1);\n                    this.rerenderTree();\n                    return;\n                }\n            }\n        }\n    }\n}\n\nexport let addTask = () => {\n    return{\n        type: ADD_TASK\n    }\n}\n\nexport let updateTask = (text) => {\n    return{\n        type: UPDATE_INPUT,\n        newTask: text\n    }\n}\n\nexport let addClassNameTask = (text, isFlag) => {\n    return{\n        type: UPDATE_TASK_NAME,\n        nameDoneTask: text,\n        flag: isFlag\n    }\n}\n\nexport let deleteTask = (id) => {\n    return{\n        type: DELETE_TASK,\n        idTask: id\n    }\n}\n\nexport let maxId = (store) => {\n    let max = 0;\n    if(store.task[0]?.id){\n        max = store.task[0].id\n    } \n    else{\n        return -1;\n    }\n    \n    for(let i in store.task){\n        if(store.task[i].id > max){\n            max = store.task[i].id;\n        }\n    }\n    return max + 1;\n}\n\nexport default state;"],"mappings":"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"},"metadata":{},"sourceType":"module"}